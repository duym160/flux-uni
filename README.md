# Flux Uni Enterprise Framework

åŸºäº UniApp + Vue 3 + TypeScript çš„ä¼ä¸šçº§å¤šå®¢æˆ·å®šåˆ¶åŒ–å¼€å‘æ¡†æ¶ã€‚

## ğŸš€ æ ¸å¿ƒç‰¹æ€§

### 1. å¤šç¯å¢ƒä¸å¤šå®¢æˆ·æ„å»º (æ ¸å¿ƒ)

æœ¬æ¡†æ¶è®¾è®¡äº†å¼ºå¤§çš„è¿è¡Œæ—¶æ„å»ºç³»ç»Ÿ `runtime.ts`ï¼Œæ”¯æŒä¸€å¥—ä»£ç å³æ—¶åˆ‡æ¢ä¸åŒå®¢æˆ·ã€ä¸åŒç¯å¢ƒçš„é…ç½®ã€‚

- **é…ç½®éš”ç¦»**ï¼šæ¯ä¸ªå®¢æˆ·çš„é…ç½®ç‹¬ç«‹å­˜å‚¨åœ¨ `src/config/*.json`ã€‚
- **Manifest åŠ¨æ€åˆå¹¶**ï¼šåŸºäº `src/manifest.base.json`ï¼Œåœ¨æ„å»ºæ—¶è‡ªåŠ¨åˆå¹¶å®¢æˆ·ä¸“å±é…ç½®ï¼ˆAppIDã€åç§°ç­‰ï¼‰ï¼Œé˜²æ­¢é…ç½®æ±¡æŸ“ã€‚
- **ç¯å¢ƒæ³¨å…¥**ï¼šè‡ªåŠ¨ç”Ÿæˆ `.env` æ–‡ä»¶ï¼Œå°†é…ç½®æ³¨å…¥åˆ° `process.env.VUE_APP_CONFIG`ã€‚

### 2. ä¼ä¸šçº§åŸºç¡€è®¾æ–½

- **ç»Ÿä¸€è¯·æ±‚å±‚ (`src/utils/request.ts`)**ï¼šå°è£… `uni.request`ï¼Œæ”¯æŒå…¨å±€æ‹¦æˆªã€Token æ³¨å…¥ã€Loading æ§åˆ¶ã€401 è‡ªåŠ¨è·³è½¬ã€‚
- **å…¨å±€è·¯ç”± (`src/utils/router.ts`)**ï¼šå°è£…è·¯ç”±è·³è½¬ï¼Œæ”¯æŒå‚æ•°å¯¹è±¡åŒ–ä¼ é€’ã€‚
- **å®‰å…¨å­˜å‚¨ (`src/js/utils.js`)**ï¼šæä¾› `storageAction`ï¼Œè‡ªåŠ¨ä¸ºç¼“å­˜ Key æ·»åŠ é¡¹ç›®å‰ç¼€ï¼Œé˜²æ­¢å¤šé¡¹ç›®åœ¨åŒä¸€åŸŸåä¸‹ç¼“å­˜å†²çªã€‚
- **åŠ¨æ€ Pages é…ç½®**ï¼šé€šè¿‡ `src/pages.js` å’Œ `src/pages-json-config/` å®ç°æ ¹æ®ä¸åŒé¡¹ç›®åŠ¨æ€ç”Ÿæˆ `pages.json`ï¼Œè§£å†³å°ç¨‹åºåŒ…ä½“ç§¯é™åˆ¶é—®é¢˜ã€‚

### 3. ä¸»é¢˜ä¸æ¢è‚¤ç³»ç»Ÿ

- **æ¶æ„**ï¼šåŸºäº CSS å˜é‡ + SCSS + uView Propsã€‚
- **ç›®å½•**ï¼š`src/theme-skin/` ç®¡ç†æ‰€æœ‰ä¸»é¢˜ã€‚
- **åˆ‡æ¢**ï¼šé€šè¿‡å…¨å±€ Mixin (`ThemeMixin`) æ³¨å…¥ `THEME_NAME` å’Œ `THEME_CSS_VAR`ï¼Œç»“åˆ `App.vue` ä¸­çš„æ ·å¼å¯¼å…¥å®ç°åŠ¨æ€æ¢è‚¤ã€‚
- **UI åº“é›†æˆ**ï¼šæ·±åº¦é›†æˆ `uview-plus`ï¼Œæ”¯æŒé€šè¿‡ `u-view-props.js` å…¨å±€ä¿®æ”¹ç»„ä»¶é»˜è®¤æ ·å¼ã€‚

## ğŸ“‚ ç›®å½•ç»“æ„

```text
â”œâ”€â”€ drivers/             # é©±åŠ¨å±‚ (å¾…é›†æˆ)
â”œâ”€â”€ env/                 # ç¯å¢ƒå˜é‡æ–‡ä»¶ (.env.development, .env.production)
â”œâ”€â”€ runtime.ts           # [æ ¸å¿ƒ] å¤šå®¢æˆ·æ„å»ºè„šæœ¬å…¥å£
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ api/             # API æ¥å£å®šä¹‰
â”‚   â”œâ”€â”€ config/          # [æ ¸å¿ƒ] å®¢æˆ·é…ç½®æ–‡ä»¶ (*.json)
â”‚   â”œâ”€â”€ js/              # å…¨å±€ JS å·¥å…· (constant.js, utils.js, mixins.js)
â”‚   â”œâ”€â”€ pages/           # ä¸»åŒ…é¡µé¢
â”‚   â”œâ”€â”€ pages-json-config/ # [æ ¸å¿ƒ] åŠ¨æ€ Pages é…ç½®
â”‚   â”œâ”€â”€ pages-sub/       # åˆ†åŒ…é¡µé¢
â”‚   â”œâ”€â”€ static/          # é™æ€èµ„æº
â”‚   â”œâ”€â”€ store/           # Pinia çŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ theme-skin/      # [æ ¸å¿ƒ] ä¸»é¢˜çš®è‚¤ç³»ç»Ÿ
â”‚   â”œâ”€â”€ utils/           # TS å·¥å…·ç±» (request, router)
â”‚   â”œâ”€â”€ App.vue          # åº”ç”¨å…¥å£ (æ³¨å…¥ä¸»é¢˜æ ·å¼)
â”‚   â”œâ”€â”€ main.ts          # åˆå§‹åŒ– (Mixin, Store)
â”‚   â”œâ”€â”€ manifest.base.json # Manifest åŸºå‡†æ¨¡æ¿
â”‚   â”œâ”€â”€ pages.js         # åŠ¨æ€è·¯ç”±å…¥å£
â”‚   â””â”€â”€ uni.scss         # UniApp å…¨å±€æ ·å¼
â””â”€â”€ vite.config.ts       # Vite é…ç½®
```

## ğŸ›  å¼€å‘ä¸æ„å»º

### 1. äº¤äº’å¼å¯åŠ¨ (æ¨è)

è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œé€‰æ‹©è¦å¯åŠ¨çš„å®¢æˆ·/ç¯å¢ƒé…ç½®ï¼š

```bash
# å¯åŠ¨ H5 å¼€å‘
npm run s:dev:h5

# å¯åŠ¨ å¾®ä¿¡å°ç¨‹åº å¼€å‘
npm run s:dev:mp-weixin

# æ„å»º H5 ç”Ÿäº§åŒ…
npm run s:build:h5
```

### 2. å¿«æ·å¯åŠ¨

ç›´æ¥æŒ‡å®šé…ç½®æ–‡ä»¶ï¼ˆä¾‹å¦‚ `dev.json`ï¼‰ï¼š

```bash
# ä½¿ç”¨ dev é…ç½®å¯åŠ¨ H5
npm run dev:h5:dev
```

## ğŸ“ å¼€å‘è§„èŒƒ

### å‘½åè§„èŒƒ

- **ç›®å½•/æ–‡ä»¶**ï¼šå°å†™ä¸­åˆ’çº¿ (kebab-case)ï¼Œå¦‚ `app-config`ã€‚
- **ç»„ä»¶**ï¼šå¤§é©¼å³° (PascalCase)ï¼Œå¦‚ `UserInfo.vue`ã€‚
- **JSå˜é‡**ï¼šå°é©¼å³° (lowerCamelCase)ã€‚
- **å¸¸é‡**ï¼šå¤§å†™ä¸‹åˆ’çº¿ (UPPER_SNAKE_CASE)ã€‚

### æ ·å¼è§„èŒƒ

- ä½¿ç”¨ SCSSã€‚
- ç»Ÿä¸€é€šè¿‡ CSS å˜é‡ç®¡ç†é¢œè‰²ï¼Œç¦æ­¢ç¡¬ç¼–ç é¢œè‰²å€¼ã€‚
- ä¸»é¢˜å˜é‡å®šä¹‰åœ¨ `src/theme-skin/theme-xxx/index.scss`ã€‚

### å­˜å‚¨è§„èŒƒ

**å¿…é¡»**ä½¿ç”¨ `storageAction` è¿›è¡Œæœ¬åœ°ç¼“å­˜æ“ä½œï¼š

```js
import { storageAction } from '@/js/utils';
import { MEMBER_ID } from '@/js/constant';

// å­˜
storageAction({ key: MEMBER_ID, value: '123', action: 'set' });
// å–
const val = storageAction({ key: MEMBER_ID, action: 'get' });
```
